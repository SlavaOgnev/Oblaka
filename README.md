# DEVOPS ЛАБЫ
Команда "Академ бойцы" - Гайдаренко Никита, Гриндий Екатерина.

# Лабораторная работа 1

Пользуясь терминалом на компьютере А перенести файл с компьютера Б на компьютер С, находящиеся в одной локальной сети. (Подсказка: вам понадобится ssh). Просьба использовать MacOS/Linux/WSL.

**Выполнение лабораторной работы**:

1. Убедились, что все три компьютера находятся в одной локальной сети и имеют соединение друг с другом. Для этого на компьютерах MacOS активировали SSH-сервер, который установлен и включен по умолчанию. И также его активировали и на компьютере Windows (начиная с Windows 10, OpenSSH поставляется в качестве опциональной функции).
2. Узнали IP-адрес всех компьютеров в локальной сети. Для этого напишем на каждом команду ```ifconfig``` для MacOs и ```ipconfig``` для Windows.

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A26%3A42.jpg)
![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A26%3A29.jpg)
![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A26%3A44.jpg)

4. Установили соединения компьютеров А и Б. Для этого в командной строке компьютера А ввели команду ```ssh ekaterina@192.168.0.102``` . Вводим пароль для компьютера А
5. С помощью команды``` scp kateg@192.168.0.105:/home/kateg/Desktop/privet.txt /Users/ekaterina/Desktop``` перенесли файл с компьютера Б на компьютер С.


![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A26%3A31.jpg)

Фаил успешно перенесен)


![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A26%3A46.jpg)

# Лабораторная работа 2
Написать два Dockerfile – плохой и хороший. Плохой должен запускаться и работать корректно, но в нём должно быть не менее 3 “bad practices”. В хорошем Dockerfile они должны быть исправлены. В Readme описать все плохие практики из кода Dockerfile и почему они плохие, как они были исправлены в хорошем  Dockerfile, а также две плохие практики по использованию этого контейнера.

**Выполнение лабораторной работы:**

Плохой Dockerfile:
### Плохой Dockerfile
+ Использование latest версии
  
  Версия не зафиксирована, что может привести к ошибкам, которые будут возникать из-за нововведений
+ Несколько команд RUN

  Это создает несколько слоев в контейнере, увеличивает объем
+ Копирование всех файлов из папки, используя `COPY . .`

  Лучше указывать конкретно нужные файлы, чтобы избежать ненужного увеличения размера образа

![Bad](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A29.jpg)

### Хороший Dockerfile
+ Теперь указана точная версия python, что обеспечивает стабильность сборки
+ Команда RUN только 1. Так будет создан всего один слой, docker-образ станет меньшего размера и будет содержать в себе все необходимое (как и в первом варианте)
+ При копировании указаны только те файлы, которые действительно нужны, а значит образ не будет забит ненужными файлами, если они случайно попадут в папку

![good](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A32.jpg)

Однако и у этого контейнера остались недостатки:

-Рекомендуется указывать рабочую директорию с помощью команды WORKDIR, чтобы операции внутри контейнера были более предсказуемыми

-Не указаны версии зависимостей при установке пакетов через pip. Рекомендуется указывать конкретные версии зависимостей для обеспечения стабильности и предотвращения возможных проблем совместимости в будущем.

### Проверяем корректность работы Dockerfile for good and bad
#### Для плохого докерфайла
1) __С помощью команды `docker build .` создаем образ__

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A37.jpg)

2) __С помощью команды `docker images` смотрим ID образа, чтоб его запустить__

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A38.jpg)

#### Для хорошего докера

![создание образа](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A40.jpg)

![запуск](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A41.jpg)

### Сравнение размеров файлов
![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A47.jpg)

Как мы видим хороший докерфаил занимает меньше места по сравнению с плохим.

Ипольззованый python код

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/IMAGE%202024-04-11%2015%3A27%3A45.jpg)

 # ЛАБОРАТОРНАЯ РАБОТА №3
 
*Задание: сделать, чтобы после пуша в ваш репозиторий автоматически собирался докер образ и результат его сборки сохранялся куда-нибудь. (например, если результат - текстовый файлик, он должен автоматически сохраниться на локальную машину, в ваш репозиторий или на ваш сервер).*
 
 ### ВЫПОЛНЕНИЕ РАБОТЫ:

Создадим отдельный репозиторий, где будет создаваться докер образ [ссылка на репозиторий](https://github.com/SlavaOgnev/lab3)
 
 1. Возьмем программу написанную на языке python(dvk.py) и сделаем так, чтобы ее вывод происходил в текстовый файл(dvk.txt).
 
 dvk.py:
 
 ![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-04-11%20%D0%B2%2015.32.24.png)

2. Создадим docker файл, для запуска тестов:

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-04-11%20%D0%B2%2015.33.05.png)

 4. Создадим секреты в виде имени и пароля пользователя, чтоб подключиться к dockerhub:

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-04-11%20%D0%B2%2015.33.48.png)

5. Создадим файл docker-build.yml, в котором будут задействованы наши секреты секреты, чтобы войти:

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-04-11%20%D0%B2%2015.34.29.png)

6. Смотрим прошло ли тесты:

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-04-11%20%D0%B2%2015.35.00.png)

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-04-11%20%D0%B2%2015.35.23.png)

6. Проверяем dockeкhub

![](https://github.com/SlavaOgnev/Oblaka/blob/main/screens/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202024-04-11%20%D0%B2%2015.36.43.png)





